## íŒ€ êµ¬ì„±ì›

---

[íŒ€ì¥] ê¹€ì„±í˜„, ê°•ë¯¼ì„±, ìœ ë™ì•ˆ, ì¡°í™ì‹

## íšŒê³  ë‚´ìš© ìš”ì•½ (ìµœì†Œ 500ì ì´ìƒ)

---
## ì¸í”„ë¼ <br>
## Dockerë€ ?

### -ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ê°€ìƒí™” ë„êµ¬

### -ê°€ìƒí™”ë€ ?

 ì˜ˆë¥¼ë“¤ì–´ ê¹€ì² ìˆ˜ë¼ëŠ” ì‚¬ëŒì€ ì‡¼í•‘ëª° ì‚¬ì´íŠ¸ë¥¼ ëŒë¦¬ê¸° ìœ„í•´ 1ì–µì§œë¦¬ ì„œë²„ë¥¼ êµ¬ì…í–ˆë‹¤. í•˜ì§€ë§Œ ê¸°ëŒ€ì™€ ë‹¤ë¥´ê²Œ ì‹¤ì‚¬ìš©ìê°€ ë³„ë¡œ ì—†ì—ˆê³  ì´ëŠ” ê³§ ì„œë²„ìì›ì˜ ë‚­ë¹„ë¡œ ì´ì–´ì¡Œë‹¤. ê·¸ë˜ì„œ ê¹€ì² ìˆ˜ëŠ” ìƒˆë¡œìš´ ì‚¬ì´íŠ¸ë¥¼ ë˜ ë§Œë“¤ì–´ ì„œë²„ì— ë“±ë¡ í–ˆì§€ë§Œ ê¸°ì¡´ì˜ í”„ë¡œì íŠ¸ì™€ ì¶©ëŒí•˜ì—¬ ë°°í¬í•  ìˆ˜ ì—†ê²Œ ë˜ì—ˆë‹¤.

ìœ„ ì˜ˆì‹œì™€ ê°™ì´ í•˜ë‚˜ì˜ ì„œë²„ë¥¼ ì´ìš©í•˜ë©´ ë¶ˆí¸í•œ ì ì´ ìƒê¹ë‹ˆë‹¤. 

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ì•ˆì´ ê°€ìƒí™”ì˜ ë“±ì¥ë°°ê²½ì…ë‹ˆë‹¤.

## -ê°€ìƒí™”ì˜ ë‘ê°€ì§€ ì¢…ë¥˜

1. ì„œë²„ ê°€ìƒí™” ( í•˜ì´í¼ ë°”ì´ì € )

í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  ì„œë²„ì—ì„œ ì—¬ëŸ¬ê°œì˜ ì„œë²„ ìš´ì˜ ì²´ì œë¥¼ ê²ŒìŠ¤íŠ¸osë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” SoftWare ì•„í‚¤í…ì²˜

hostOSìœ„ì— ì„œë¡œ ë‹¤ë¥¸ ê²ŒìŠ¤íŠ¸OSë¥¼ ì˜¬ë ¤ ì„œë²„ì˜ ìì›ì„ ë‚˜ëˆ„ì–´ í• ë‹¹í•´ì¤ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/53210680/191979424-0a7b2919-4552-4a6d-aae4-da2fb06c68ee.png)

í•˜ì§€ë§Œ ì„œë²„ ê°€ìƒí™”ëŠ” í•˜ì´í¼ë°”ì´ì €ë¥¼ ë°˜ë“œì‹œ ê±°ì³ì•¼í•˜ë¯€ë¡œ ì¼ë°˜ í˜¸ìŠ¤íŠ¸osì— ë¹„í•´ ì„±ëŠ¥ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.

ë˜í•œ ì´ë¯¸ì§€ì˜ í¬ê¸°ë„ ì»¤ì„œ ìš©ëŸ‰ì— ë¶€ë‹´ì´ ìƒê¹ë‹ˆë‹¤.

ì—¬ê¸°ì„œ ì˜ë¬¸ì´ ìƒê¹ë‹ˆë‹¤. 

ë‚˜ëŠ” ì‘ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ í•˜ë‚˜ êµ¬ë™í• ê±´ë° êµ³ì´ OSê¹Œì§€ ë„ì›Œì„œ ê°€ìƒí™”í•´ì•¼í•˜ë‚˜ ë„˜ ì†í•´ì¸ê±¸ ?

í•´ì„œ ë‚˜ì˜¨ê²Œ ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ê°€ìƒí™”ì…ë‹ˆë‹¤.

1. ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ê°€ìƒí™”
- í”„ë¡œì„¸ìŠ¤ ë‹¨ìœ„ì˜ ê²©ë¦¬ í™˜ê²½
- chroot, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ,cgroupë“± ë¦¬ëˆ…ìŠ¤ì˜ ìì²´ ê¸°ìˆ  ì‚¬ìš©
    
![image](https://user-images.githubusercontent.com/53210680/191979597-f28ad088-4955-4099-bc13-d3d2acc900df.png)

    

![image](https://user-images.githubusercontent.com/53210680/191979686-40d82724-280f-46f4-aa09-3d8a6b9dfd82.png)

## ê·¸ë˜ì„œ ë„ì»¤ë€ ?

- ìœ ì €ê°€ ì»¨í…Œì´ë„ˆë¥¼ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì¡´ì¬
- ì»¨í…Œì´ë„ˆ ê´€ë¦¬, ì´ë¯¸ì§€ ê´€ë¦¬, ë³¼ë¥¨ ê´€ë¦¬, ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ì˜ ì¼ì„ í•´ì¤Œ

### ì‚¬ìš©ì â†’ dockerëª…ë ¹ì–´ â†’ ë„ì»¤ í´ë¼ì´ì–¸íŠ¸(CLI) â†’ ë„ì»¤ë°ëª¬(ì»¨í…Œì´ë„ˆ ê´€ë¦¬ ì£¼ì²´)

### ê·¸ë ‡ë‹¤ë©´ ì»¨í…Œì´ë„ˆê°€ ë§ì•„ì ¸ì„œ ìì›ì´ ë¶€ì¡±í•˜ë‹¤ë©´ ?

1. Scale Up (ì„œë²„ë¥¼ ëŠ˜ë¦°ë‹¤,,,ì¦‰ êµ¬ë§¤í•œë‹¤)
2. Scale Out(í´ëŸ¬ìŠ¤í„°)

## -í´ëŸ¬ìŠ¤í„°ë€ ?

- ê°ê¸° ë‹¤ë¥¸ ì„œë²„ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ì–´ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œê°™ì´ ë™ì‘í•˜ê²Œ í•˜ëŠ” ê²ƒ

![image](https://user-images.githubusercontent.com/53210680/191979749-d02a74cf-4a49-4e5a-b33a-6642c83a88ee.png)


### ì  í‚¨ìŠ¤ëŠ” ì™œ ë‚˜ì™”ì„ê¹Œ ?

- git branch íŒŒì„œ ê°ì ì‘ì—…, ì´í›„ í•œ ì‚¬ëŒì´ ì·¨í•©í•´ì„œ build , test ì§„í–‰í•˜ëŠ” ê³¼ì •ì´ ì—„ì²­ë‚˜ê²Œ ì˜¤ë˜ ê±¸ë¦°ë‹¤â€¦
ì´ë ‡ê²Œ ì£¼ 1íšŒ ì”© ë§¤ë²ˆ ë°°í¬ê°€ ëœë‹¤.
- ê·¸ëŸ°ë°, ëˆ„ê°€ í•œ ì‘ì—…ì„ ë¹¼ê³ , ì¶”ê°€í•˜ê³ , â€¦ ë“±ë“±ì˜ ì‘ì—…ì´ ë§¤ìš° ë²ˆê±°ë¡œìš´ ì¼ì´ë‹¤.
ì´ë¥¼ ìë™í™” í•  ë°©ë²•ì´ ì—†ì„ê¹Œ? 
â‡’ `Github flow, ì  í‚¨ìŠ¤`
- Github flow
    - Master branch ì—ì„œ ê°ì branch íŒŒì„œ ì‘ì—…
    - ë¡œì»¬ì—ì„œ ì‘ì—…í•œ ë‚´ì—­ ì„œë²„ì— ì˜¬ë ¤ì„œ Pull Request ë¥¼ ì„œë²„ Master branch ì— ë³´ëƒ„.
    - ì´í›„ Merge ì—ì„œ ì„œë²„ì˜ Master branch ì— ê³„ì†í•´ì„œ ë°˜ì˜í•œë‹¤.
- ì „ì²´ ì„œë²„ë¡œ ì‚´í´ë³´ì.
pr ì„±ê³µí•´ì„œ merge ë˜ë©´, ë¹Œë“œ ì„œë²„ì— ìµœì‹  ì†ŒìŠ¤ì½”ë“œê°€ ë‹¤ìš´ë¡œë“œë˜ê³ , í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ëŒë ¤ë³¸ë‹¤.
ì´í›„ ì„±ê³µ ì‹œ ì´ë¯¸ì§€ ìƒì„±í•˜ê³ , ìš´ì˜ì„œë²„ì—ì„œ ì´ë¥¼ ë‹¤ìš´ë¡œë“œ í•¨.
â‡’ ì´ ê³¼ì •ì„ ì  í‚¨ìŠ¤ê°€ í•´ì¤€ë‹¤.
    
    ![image](https://user-images.githubusercontent.com/90627763/191983288-4eb380b4-ba66-4e7d-95f0-bd64f91cff7e.png)
    

### í”„ë¡œì íŠ¸ê°€ private repo ë¼ë©´ ..?

- new item - basic_work_3 ë§Œë“¤ê¸°, Freestyle project
- Git ì²´í¬, Github ì—ì„œ ë‚´ private í”„ë¡œì íŠ¸ ê°€ì ¸ì˜¤ê¸°. 
â†’ ê¶Œí•œ ì—†ì–´ì„œ build ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤!!!
- github - setting - Developer settings - Personal access tokens - Generate new token
    - Note ì´ë¦„ì€ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤. ì¼ë‹¨, jenkins_1
    repo ë§Œ ì²´í¬
- ë¦¬ëˆ…ìŠ¤ì—ì„œ basic_work_3 ë¡œ ì´ë™.
    - git clone https:// ~ â‡’ ë‹¹ì—°íˆ ì•ˆë¨. í† í° ì—†ì–´ì„œ private repoëŠ” pull ëª»í•¨.
    - sudo git clone [https://í† í°@github.com/jhs512/private_sample](https://í† í°@github.com/jhs512/private_sample)  â‡’ ì´ê±¸ ë°›ì•„ì•¼ í•œë‹¤.
    - ls -alh ë¡œ í™•ì¸
- jenkins ë“¤ì–´ê°€ì„œ, git ì£¼ì†Œ ë°”ê¾¸ê¸°. (í† í° ë“¤ì–´ìˆëŠ” ì£¼ì†Œ)
ê·¸ë¦¬ë„ ë‹¤ì‹œ build í•˜ë©´ ì„±ê³µí•œë‹¤!
    - sudo rm -rf *
    sudo rm -rf .git
    ì‹¹ ë‹¤ ì§€ìš°ê³ , ë‹¤ì‹œ build  â‡’ ê·¸ë¦¬ê³  ls -alh í™•ì¸í•´ë³´ë©´ ìƒê¸´ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### ****ngrok ê°€ í•„ìš”í•œ ì´ìœ ****

- ngrok ì™œ ê¹”ì•„ì•¼ í• ê¹Œ ?
    
    ![image](https://user-images.githubusercontent.com/90627763/191983490-6bb31ada-2458-4577-8a62-e3ec2e34fcea.png)
    
    - ê°œì¸ PC ì˜ ê³µì¸ IP ê°€ ì—†ë‹¤. 
    ngrok ë¥¼ ì„¤ì¹˜í•˜ë©´, ê°œì¸ pc ì— ë„ë©”ì¸ ë¶€ì—¬ ê°€ëŠ¥, ì ˆëŒ€ì  ì£¼ì†Œ ë¶€ì—¬ ê°€ëŠ¥.

```java
# cmd ì°½ ì—´ì–´ì„œ,
- cd c:\work\ngrok   => ì´ ì•ˆì—ë‹¤ê°€ download í•œ ë””ë ‰í† ë¦¬ ë„£ì–´ì¤€ë‹¤.
- ì´í›„, dashboard ì—ì„œ 2.Connect your account ì— ë‚˜ì™€ ìˆëŠ” ëª…ë ¹ì–´ ì‹¤í–‰.
- ê·¸ í›„, ngrok.exe http 8081  ë¡œ ì‹¤í–‰í•´ì•¼ í•œë‹¤.
```

- ì´ì œ, ë‚˜ë§Œì˜ IP ê°€ ìƒê²¼ë‹¤. í•˜ì–€ìƒ‰ ë¶€ë¶„. ì´ê±¸ë¡œ ì ‘ì†í•´ì•¼ í•¨.
https://xxxx-xxx-xxx-xxx.jp.ngrok.io  â‡’ ì´ëŸ° ì‹ìœ¼ë¡œ ìƒê¸´ë‹¤.

- VirtualBox ì— í¬íŠ¸í¬ì›Œë”© ì¶”ê°€.
    - ì„¤ì • - ë„¤íŠ¸ì›Œí¬ - ì–´ëŒ‘í„° 1 - ê³ ê¸‰ - í¬íŠ¸í¬ì›Œë”©
    
    - ì´ë ‡ê²Œ í•˜ê³ , ìœ„ì— ë‚˜ë§Œì˜ ip ì£¼ì†Œë¡œ ì ‘ì†í•´ì„œ Welcome to Jenkins ë‚˜ì˜¤ë©´ ì„±ê³µ

### ****github webhookì— ì˜í•´ì„œ ì  í‚¨ìŠ¤ ë¹Œë“œê°€ ìœ ë°œ ë˜ë„ë¡****

âœ… ì´ì œ, github ì—ì„œ ì»¤ë°‹ì´ ë˜ë©´ Jenkins ê°€ ê·¸ê±¸ ë°›ì•„ì¤ë‹ˆë‹¤.

- ì¼ë‹¨, admin , lldj123414 ë¡œ ì ‘ì†.
- basic_work_4 ìƒì„±, github repository url ë„£ê³ , save â†’ build ê¹Œì§€.
- ê·¸ í›„, Console Output ë“¤ì–´ê°€ì„œ ,
    - ì´ /var/jenkins_home/~ 
    ì´ ë¶€ë¶„ì€ ë‹¹ì—°íˆ jenkins_1 ì´ë¼ëŠ” ì»¨í…Œì´ë„ˆ ì•ˆì— ë“¤ì–´ ìˆëŠ” í´ë”ì´ë‹¤!!!
        
        ```java
        # ì ‘ì†í•˜ëŠ” ë°©ë²•
        docker ps -a   
        docker exec -it jenkins_1 bash
        ê·¸ í›„ì— cd /var/jenkins_home/workspace/basic_work_4
        
        # inspect ë¡œ Mounts ì •ë³´ í™•ì¸(ì„ íƒì‚¬í•­)
        - docker inspect jenkins_1 | less   => Mounts ì •ë³´ê¹Œì§€ ë‚˜ì˜¨ë‹¤.
        	- ì–´ë–»ê²Œ ë“¤ì–´ê°€ë©´ ë˜ëŠ”ì§€ ë‚˜ì™€ ìˆë‹¤. "Source" : í™•ì¸ ! 
        - cd basci_work_4 ë¡œ ë“¤ì–´ê°€ì„œ ls ë¡œ í™•ì¸.
        
        ```
        
    

âœ… commit í•˜ë©´, jenkins ê°€ ì•Œì•„ì±„ì„œ pull í–ˆìœ¼ë©´ ì¢‹ê² ë‹¤..

- repository - settings - webhooks -
    - í›… ê°ˆê³ ë¦¬(ê±¸ì–´ë‘”ë‹¤) 
    - ë‚´ê°€ ì„œë²„ API ë¥¼ êµ¬í˜„í•´ì„œ ì»¤ë°‹ì„ ë‚ ë¦´ ë•Œë§ˆë‹¤, ë‹¹ì‹ ì€ ê·¸ì— í•´ë‹¹í•˜ëŠ” í”„ë¡ íŠ¸ë¥¼ êµ¬í˜„í•´ì£¼ì„¸ìš”.
    - Payload URL ì— íŠ¹ì • ë§í¬ë¥¼ ë„£ìœ¼ë©´, ë³€ê²½ì‚¬í•­ ìƒê¸¸ ë•Œë§ˆë‹¤ ê·¸ê³³ìœ¼ë¡œ ì•Œë ¤ì¤€ë‹¤.
    - ê·¸ëŸ¬ë‚˜, 
    10. ~ 
    172.16 ~ 172.17
    192.168 ~  â‡’ ì´ëŸ¬í•œ í˜•íƒœì˜ ipëŠ” ì‚¬ì„¤ ipë¡œ, ë‚´ë¶€ì—ì„œë§Œ í†µìš©ë˜ëŠ” ipì´ë‹¤. 
    ì¦‰, ì™¸ë¶€ì—ì„œ ì ‘ì†ê°€ëŠ¥í•œ ip ê°€ ì•„ë‹ˆë‹¤. 
    â‡’ Github ê°€ ì´ê²ƒë§Œìœ¼ë¡œëŠ” ëª» ì•Œì•„ë“£ê¸° ë•Œë¬¸ì—, ngrok ë¥¼ ëš«ì€ ê²ƒì´ë‹¤.
    ì¦‰, ngrok ê°€ ë‚´ pcì˜ public domain ì„ ë¶€ì—¬í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.
    - [https://49f4-121-152-209-102.jp.ngrok.io/github-webhook/](https://49f4-121-152-209-102.jp.ngrok.io/github-webhook/)  â‡’ ì´ê±¸ ì…ë ¥.
    
- ì´ì œ, github ì—ì„œ ì•„ë¬´ê±°ë‚˜ commit í•˜ê³  í™•ì¸í•´ë³´ë©´, ?
Jenkinsì˜ í¸ì§€í•¨ì— ì •ë³´ê°€ ë‚ ë¼ê°€ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
    - ê·¸ëŸ¬ë‚˜ ì•„ì§ ì‚¬ëŒë“¤(í”„ë¡œì íŠ¸ë“¤)ì´ í¸ì§€ë¥¼ ì°¾ì•„ê°€ì§€ ì•ŠëŠ”ë‹¤â€¦
    â‡’ ì  í‚¨ìŠ¤ì—ì„œ ì¶”ê°€ ì„¤ì • í•„ìš”! 
    basic_work_4 ë“¤ì–´ê°€ì„œ - êµ¬ì„± - ë¹Œë“œ ìœ ë°œì—ì„œ í•­ëª© ì²´í¬!
        
        
    - ì´ì œ , githubì—ì„œ commit ë‚ ë¦¬ê³  ë¦¬ëˆ…ìŠ¤ì—ì„œ cat [readme.md](http://readme.md) ë¡œ í™•ì¸í•´ë³´ë©´, ë°”ë€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ !!
    - ë§Œì•½, github web hook ì“°ê¸° ì‹«ìœ¼ë©´, commit ì‹œ ë§ˆë‹¤ jenkins ì—ì„œ build í´ë¦­í•´ì¤˜ë„ ë˜ê¸´í•¨.


## SpringBoot

### íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì§€ê³  jpqlì„ ì‚¬ìš©í•˜ê¸°
```java
@Modi..
@Query("update User set name = :name, age = :age, ssn = :ssn where id = :id")
int updateSpecificAttribute(@Param("name") String name, @Param("age") Integer age, @Param("ssn") String ssn, @Param("id") Long id );
```


## íšŒê³  ê³¼ì •ì—ì„œ ë‚˜ì™”ë˜ ì§ˆë¬¸ (ìµœì†Œ 200ì ì´ìƒ)

ì—ëŸ¬ ë©”ì‹œì§€
```
org.springframework.dao.InvalidDataAccessApiUsageException: For queries with named parameters you need to use provide names for method parameters. Use @Param for query method parameters, or when on Java 8+ use the javac flag -parameters.;
```


## íšŒê³  ì¸ì¦ìƒ· & íŒ€ ìë‘

---


- íšŒê³  ì¸ì¦ìƒ·

![image](https://user-images.githubusercontent.com/53210680/191946432-ff0fe578-0dc3-4bbb-8743-06616f234b4b.png)



## ğŸ’»ë¹„ì „ê³µìì™€ ì „ê³µìê°€ í•¨ê»˜ ë§Œë“¤ì–´ê°€ëŠ” ê°œë°œ ì´ì•¼ê¸° (íŒ€ìë‘ë©˜íŠ¸)

1. 
2. 
3. 
4. 
5. 
